
.Confluence setup
[width="100%",cols="16%,11%,73%",options="header",]
|===
|Parameter label (name) |Default value|Description|Collaborative editing mode
(`CollaborativeEditingMode`)|`synchrony-local`|Collaborative Editing can be off, run locally on the Confluence nodes (requires Confluence version 6.12+ and 1 GB heap free for Synchrony), or run on a separately autoscaled group of nodes.|Version *
(`ConfluenceVersion`)|`7.13.0`|The version of Confluence to install
|===
.Cluster nodes
[width="100%",cols="16%,11%,73%",options="header",]
|===
|Parameter label (name) |Default value|Description|Enable CloudWatch integration
(`CloudWatchIntegration`)|`Metrics and Logs`|Enables CloudWatch metrics with or without log gathering. If cost is an issue, you can disable this altogether.|Cluster node instance type
(`ClusterNodeInstanceType`)|`c5.xlarge`|Instance type for the cluster application nodes (note - for "synchrony-local" collaborative editing you must choose an instance size with over 5 GB RAM).|Maximum number of cluster nodes
(`ClusterNodeMax`)|`1`|Maximum number of nodes in the cluster.|Minimum number of cluster nodes
(`ClusterNodeMin`)|`1`|Set to 1 for new deployment. Can be updated post launch.|Cluster node instance volume size
(`ClusterNodeVolumeSize`)|`50`|Size of cluster node root volume in GB (note - size based upon Application indexes x 4).|Maximum number of Synchrony cluster nodes
(`SynchronyClusterNodeMax`)|`1`|Maximum number of Synchrony cluster nodes.|Minimum number of Synchrony cluster nodes
(`SynchronyClusterNodeMin`)|`1`|Minimum number of Synchrony cluster nodes.|Synchrony cluster node instance type
(`SynchronyNodeInstanceType`)|`t3.medium`|Synchrony cluster node instance type.|Deployment Automation Git Repository URL
(`DeploymentAutomationRepository`)|`https://bitbucket.org/atlassian/dc-deployments-automation.git`|The deployment automation repository to use for per-node initialization. Leave this as default unless you have customizations.|Deployment Automation Branch
(`DeploymentAutomationBranch`)|`master`|The deployment automation repository branch to pull from.|Ansible playbook
(`DeploymentAutomationPlaybook`)|`aws_confluence_dc_node.yml`|The Ansible playbook to invoke to initialize the application node on first start.|Custom command-line parameters for Ansible
(`DeploymentAutomationCustomParams`)|`**__Blank string__**`|Additional command-line options for the `ansible-playbook` command. See https://bitbucket.org/atlassian/dc-deployments-automation/src/master/README.md for more information about overriding parameters. (Optional)|SSH keyname to use with the repository
(`DeploymentAutomationKeyName`)|`**__Blank string__**`|Named Key Pair name to use with this repository. The key should be imported into the SSM parameter store. (Optional)
|===
.Database
[width="100%",cols="16%,11%,73%",options="header",]
|===
|Parameter label (name) |Default value|Description|Database engine
(`DBEngine`)|`PostgreSQL`|The database engine to use. The default is PostgreSQL (Amazon RDS for PostgreSQL). You can choose Amazon Aurora PostgreSQL.|The database engine version to use
(`DBEngineVersion`)|`10`|The database engine version to use; we'll install a suitable minor version for your chosen engine. Make sure that the Confluence version you're installing supports the database engine selected.|Database instance class
(`DBInstanceClass`)|`db.m4.large`|RDS instance type (must be R4 family if using Amazon Aurora).|RDS Provisioned IOPS
(`DBIops`)|`1000`|Must be in the range of 1000 - 30000 and a multiple of 1000. This value is only used with Provisioned IOPS. Note: The ratio of IOPS per allocated-storage must be between 3.00 and 10.00. Not used for Amazon Aurora.|Master (admin) password *
(`DBMasterUserPassword`)|`**__Requires input__**`|Password for the master ('postgres') account. Must be at least 8 characters and include 1 uppercase, 1 lowercase, 1 number, and 1 of the following symbols: ! # $ { * : [ = , ] - _ + % &|Enable RDS Multi-AZ deployment
(`DBMultiAZ`)|`true`|When DBEngine is 'PostgreSQL', this will determine whether to provision a multi-AZ RDS instance. When DBEngine is 'Amazon Aurora PostgreSQL', this will determine whether to provision a single or a multiple-node Amazon Aurora cluster.|Application user database password *
(`DBPassword`)|`**__Requires input__**`|Database password used by Confluence. Must be at least 8 characters and include 1 uppercase, 1 lowercase, 1 number, and 1 of the following symbols: ! # $ { * : [ = , ] - _ @ + % &|Database storage
(`DBStorage`)|`200`|Database allocated storage size, in gigabytes (GB). If you choose Provisioned IOPS, storage should be between 100 and 6144. Not used for Amazon Aurora.|Database encryption
(`DBStorageEncrypted`)|`false`|Whether or not to encrypt the database.|Database storage type
(`DBStorageType`)|`General Purpose (SSD)`|Database storage type. Not used for Amazon Aurora.
|===
.Bastion host provisioning
[width="100%",cols="16%,11%,73%",options="header",]
|===
|Parameter label (name) |Default value|Description|Deploy Bastion host
(`BastionHostRequired`)|`true`|Whether to provision a Bastion host instance. If 'true', then you need to provide an EC2 Key Pair (otherwise, you won't be able to use the Bastion host to access Confluence instances).|SSH Key Pair Name
(`KeyPairName`)|`**__Blank string__**`|Public/private EC2 Key Pairs (without file extension) to allow you to securely access the Bastion host.
|===
.Networking
[width="100%",cols="16%,11%,73%",options="header",]
|===
|Parameter label (name) |Default value|Description|Availability Zones
(`AvailabilityZones`)|`**__Requires input__**`|List of Availability Zones to use for the subnets in the VPC. Note: You must specify 2 Availability Zones here; if more are specified, only the first 2 will be used.|Permitted IP range
(`CidrBlock`)|`**__Requires input__**`|CIDR block allowed to access the Atlassian product. This should be set to a trusted IP range; if you want to give public access use '0.0.0.0/0'.|Make instance internet facing
(`InternetFacingLoadBalancer`)|`true`|Controls whether the load balancer should be visible to the internet (true) or only within the VPC (false).|SSL Certificate ARN
(`SSLCertificateARN`)|`**__Blank string__**`|Amazon Resource Name (ARN) of your SSL certificate. If you want to use your own certificate that you generated outside of Amazon, you need to first import it to AWS Certificate Manager. After a successful import, you'll receive the ARN. If you want to create a certificate with AWS Certificate Manager (ACM certificate), you will receive the ARN after it's successfully created.
|===
.DNS
[width="100%",cols="16%,11%,73%",options="header",]
|===
|Parameter label (name) |Default value|Description|Existing DNS name
(`CustomDnsName`)|`**__Blank string__**`|(Optional) Use custom existing DNS name for your Data Center instance. This will take precedence over HostedZone. Please note: you must own the domain and configure it to point at the load balancer.|Route 53 Hosted Zone
(`HostedZone`)|`**__Blank string__**`|(Optional) The domain name of the Amazon Route 53 PRIVATE Hosted Zone in which to create cnames.
|===
.Application tuning
[width="100%",cols="16%,11%,73%",options="header",]
|===
|Parameter label (name) |Default value|Description|Tomcat Context Path
(`TomcatContextPath`)|`**__Blank string__**`|The context path of this web application, which is matched against the beginning of each request URI to select the appropriate web application for processing. If used, must include leading "/".  See http://tomcat.apache.org/tomcat-8.0-doc/config/http.html for reference on tuning tomcat parameters.|Catalina options
(`CatalinaOpts`)|`**__Blank string__**`|Java options that are passed to the Java virtual machine (JVM) that runs Confluence.|Confluence Heap Size Override
(`JvmHeapOverride`)|`**__Blank string__**`|The heap size to use, in MB (e.g., 1024m) or GB (e.g., 1g), to override the default amount of memory to allocate to the JVM for your instance type.|Synchrony Heap Size Override
(`JvmHeapOverrideSynchrony`)|`**__Blank string__**`|The heap size to use, in MiB (e.g., 1024m) or GiB (e.g., 1g), to override the default amount of memory to allocate to the JVM for Synchrony.|DB Pool Maximum Size
(`DBPoolMaxSize`)|`60`|The maximum number of database connections that can be opened at any time. See https://confluence.atlassian.com/doc/performance-tuning-130289.html for reference on tuning database parameters.|DB Pool Minimum Size
(`DBPoolMinSize`)|`20`|The minimum number of idle database connections that are kept open at any time.|DB Timeout
(`DBTimeout`)|`30`|Number of seconds that Connections in excess of minPoolSize should be permitted to remain idle in the pool before being culled.|DB Idle Test Period
(`DBIdleTestPeriod`)|`100`|If greater than 0, this is the frequency (in seconds) that c3po will test all idle, pooled but unchecked-out connections.|DB Max Statements
(`DBMaxStatements`)|`0`|The size of c3p0's global PreparedStatement cache. It controls the total number of statements cached, for all connections. If set, it should be a fairly large number, as each pooled Connection requires its own, distinct flock of cached statements.|DB Validate
(`DBValidate`)|`false`|If true, a connection test will be performed at every connection checkout to verify that the connection is valid.|DB Preferred Test Query
(`DBPreferredTestQuery`)|`select version();`|The query that will be executed for all connection tests.|DB Acquire Increment
(`DBAcquireIncrement`)|`1`|Determines how many connections at a time c3p0 will try to acquire when the pool is exhausted.|Enable App to Process Email
(`MailEnabled`)|`true`|Enable mail processing and sending.|Tomcat Accept Count
(`TomcatAcceptCount`)|`10`|The maximum queue length for incoming connection requests when all possible request processing threads are in use.|Tomcat Connection Timeout
(`TomcatConnectionTimeout`)|`20000`|The number of milliseconds this connector will wait, after accepting a connection, for the request URI line to be presented.|Tomcat Default Connector Port
(`TomcatDefaultConnectorPort`)|`8080`|The port on which to serve the application.|Tomcat Enable DNS Lookups
(`TomcatEnableLookups`)|`false`|Set to true if you want calls to request.getRemoteHost() to perform DNS lookups in order to return the actual host name of the remote client.|Tomcat Maximum Threads
(`TomcatMaxThreads`)|`48`|The maximum number of request processing threads to be created by this connector, which therefore determines the maximum number of simultaneous requests that can be handled.|Tomcat Minimum Spare Threads
(`TomcatMinSpareThreads`)|`10`|The minimum number of threads always kept running.|Tomcat Protocol
(`TomcatProtocol`)|`HTTP/1.1`|Sets the protocol to handle incoming traffic.|Tomcat Redirect Port
(`TomcatRedirectPort`)|`8443`|The port number for Catalina to use when automatically redirecting a non-SSL connector actioning a redirect to a SSL URI.
|===
.AWS Quick Start configuration
[width="100%",cols="16%,11%,73%",options="header",]
|===
|Parameter label (name) |Default value|Description|Quick Start S3 Bucket Name
(`QSS3BucketName`)|`aws-quickstart`|S3 bucket name for the Quick Start assets. Quick Start bucket name can include numbers, lowercase letters, uppercase letters, and hyphens (-). It cannot start or end with a hyphen (-).|Quick Start S3 Key Prefix
(`QSS3KeyPrefix`)|`quickstart-atlassian-confluence/`|S3 key prefix for the Quick Start assets. Quick Start key prefix can include numbers, lowercase letters, uppercase letters, hyphens (-), and forward slash (/).|ASI identifier
(`ExportPrefix`)|`ATL-`|Identifier used in all variables exported from this deployment’s Atlassian Standard Infrastructure (VPCID, SubnetIDs, KeyName). Use different identifier to deploy multiple Atlassian Standard Infrastructures in the same AWS region.
|===